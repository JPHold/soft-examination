[TOC]

> 阐述了流水线的原理、效率、耗时时间公式、吞吐率公式

# 概念
> 多条指令交替执行的**准并行**处理技术
> 为何是准并行：并不是同时执行多条指令，而是在某个时刻，a指令执行到b1步骤、b指令执行执行a1步骤，假如a指令一直塞在b1步骤，那么b指令只能等待（**所以其实是串行执行**）

# 指令的执行过程
取指→分析→执行

* 假设取指、分析、执行的耗时都是1ms
1. 不采用流水线
>现在有三条指令需要执行
>**必须等上一条指令完成执行，才执行下一条指令**，所以总耗时 = 每个步骤的总耗时* 指令数 = (1 * 3) * 3 = 9(ms) 

|      |     |     |     |     |     |     |     |     |     |
| ---- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 取指 | 1️⃣ |     |     | 2️⃣ |     |     | 3️⃣ |     |     |
| 分析 |     | 1️⃣ |     |     | 2️⃣ |     |     | 3️⃣ |     |
| 执行 |     |     | 1️⃣ |     |     | 2️⃣ |     |     | 3️⃣ |
| 耗时 | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   | 9   |


2. 采用流水线
>现在有三条指令需要在流水线执行
>**无须等上一条指令完成执行，才执行下一条指令，只要有空余步骤，就立马给下个指令安排操作**，所以总耗时 = 第一个指令的每个步骤的总耗时 + 剩余指令数 * 步骤中最长耗时 = (1 * 3)  + 2 * 1  = 5(ms) 

|      |     |     |     |     |     |
| ---- | --- | --- | --- | --- | --- |
| 取指 | 1️⃣ | 2️⃣ | 3️⃣ |     |     |
| 分析 |     | 1️⃣ | 2️⃣ | 3️⃣ |     |
| 执行 |     |     | 1️⃣ | 2️⃣ | 3️⃣ |
| 耗时 | 1   | 2   | 3   | 4   | 5   |
